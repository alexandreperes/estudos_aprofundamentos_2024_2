---
title: "Estudos e Aprofundamentos II - 2024.2"
subtitle: "Portfólio de Atividades Realizadas em Aula"
author: 
  - name: "Prof. Alexandre Peres"
    affiliation: 
      Universidade Federal de Mato Grosso do Sul (UFMS)
      Programa de Pós-Graduação em Psicologia
format: 
  html:
    toc: true
    toc_depth: 5
    toc_float: true
    self_contained: false
    theme: united
    highlight: Flatly
editor: visual
---

# Como utilizar este documento

Este documento serve como um portfólio que registra as atividades realizadas em sala de aula na disciplina Estudos e Aprofundamentos II do Mestrado em Psicologia do PPG Psicologia da UFMS, ofertada no segundo semestre. Alunos da disciplina podem utilizá-lo como um guia para elaborar seus próprios portfólios, além de acessar recursos úteis para o desenvolvimento de habilidades no R.

O documento está estruturado em formato de blog, organizado cronologicamente de forma decrescente. Cada entrada de data inclui subtítulos que identificam as atividades realizadas naquele dia. Para facilitar a navegação, utilize o menu disponível. O professor redigiu os registros em primeira pessoa, simulando a perspectiva de um estudante da disciplina que está documentando suas experiências em um diário. Este documento será atualizado semanalmente pelo professor.

------------------------------------------------------------------------

# 07 de outubro
## Teoria Clássica dos Testes (TCT)
Na aula de hoje, estudamos a Teoria Clássica dos Testes (TCT). Para isso, utilizamos um banco de dados com itens dicotômicos.

A TCT é uma abordagem psicométrica fundamental que busca entender e mensurar o desempenho de indivíduos em testes psicológicos e educacionais. A TCT baseia-se em um modelo linear em que o `escore observado (T)` é a soma do `escore verdadeiro (V)` e do `erro de medida (E)`, expresso como `T = V + E`. O escore verdadeiro representa a magnitude real do traço que se deseja medir, enquanto o erro é a variabilidade aleatória que afeta a consistência dos resultados. A TCT foca na confiabilidade, que indica a precisão de um teste, e na validade, que avalia se o teste mede de fato o que se propõe. O escore total em um teste é a soma das respostas corretas, amplamente utilizado para inferir habilidades ou características dos respondentes.

Algumas referências sobre a TCT:

- [Pasquali (2009)](https://www.scielo.br/j/reeusp/a/Bbp7hnp8TNmBCWhc7vjbXgm/)

- [Primi (2010)](https://pepsic.bvsalud.org/pdf/avp/v11n2/v11n2a15.pdf)

- [Sartes e Souza-Formigoni (2013)](https://www.scielo.br/j/prc/a/PfzhXqpV4vzPYgvf75PVwcL/?format=pdf&lang=pt)


## Pacotes para a Aula

Pacotes que usamos na aula:
```{r}
#install.packages("psychTools")
#install.packages("psych")
#install.packages("CTT")
```

Uma vez que você tenha instalado os pacotes, você pode desabilitar a função `install.packages` para que o `R` não fique instalando os pacotes novamente toda vez que você rodar o *chunk* anterior. Para desabilitar a função, use o símbolo `#` antes dela, como está no *chunk*. Use o `#` em cada linha, no caso do *chunk* anterior.

## TCT com Itens Dicotômicos

Itens dicotômicos são questões ou elementos de um teste (instrumento de mensuração) em que as respostas possíveis são binárias, ou seja, têm apenas duas opções. Normalmente, essas opções são representadas por valores como `1` (e.g., acerto, sim, verdadeiro) e `0` (e.g., erro, não, falso). Na psicometria, itens dicotômicos são frequentemente usados em testes de habilidade, conhecimento ou outros tipos de avaliações em que se deseja medir a presença ou ausência de uma característica específica. A análise desses itens envolve métodos para avaliar a dificuldade (proporção de acertos) e a discriminação (capacidade do item de diferenciar entre indivíduos com diferentes níveis de habilidade ou traço).

### Banco de Dados
O banco de dados `ability` do pacote [`psychTools`](https://cran.r-project.org/web/packages/psychTools/psychTools.pdf) é um conjunto de dados dicotômicos que contém respostas de indivíduos a um teste de habilidades. Cada linha representa um respondente e cada coluna, um item do teste. Os dados são codificados de forma binária, onde 1 indica uma resposta correta e 0 indica uma resposta incorreta. Lista dos itens no banco:

- reason.4: Questões básicas de raciocínio.

- reason.16: Questão básica de raciocínio.

- reason.17: Questão básica de raciocínio.

- reason.19: Questão básica de raciocínio.

- letter.7: Na seguinte série alfanumérica, qual é a próxima letra?

- letter.33: Na seguinte série alfanumérica, qual é a próxima letra?

- letter.34: Na seguinte série alfanumérica, qual é a próxima letra?

- letter.58: Na seguinte série alfanumérica, qual é a próxima letra?

- matrix.45: Tarefa de raciocínio matricial.

- matrix.46: Tarefa de raciocínio matricial.

- matrix.47: Tarefa de raciocínio matricial.

- matrix.55: Tarefa de raciocínio matricial.

- rotate.3: Rotação espacial do tipo 1.2.

- rotate.4: Rotação espacial do tipo 1.2.

- rotate.6: Rotação espacial do tipo 1.1.

- rotate.8: Rotação espacial do tipo 2.3.



Carregando o banco de dados `ability` diretamente do pacote `psychTools`:
```{r}

dados <- psychTools::ability #criar um objeto chamado dados com o banco em formato de data.frame

```


Verificando os nomes no banco:
```{r}
names(dados)
```
Por que será que não deu certo o comando `names()` no *chunk* anterior? Verificando a classe e a estrutura do banco:
```{r}
class(dados) #verificar o tipo de objeto criado
str(dados)
```


Vimos que o banco está em formato de matriz. Para verificar os nomes em uma matriz, não usamos o comando `names()`, mas sim o `colnames()`.


A seguir mudamos a classe do objeto dados de uma matriz para um data.frame e podemos usar o `names()` para verificar os nomes das colunas:
```{r}
dados <- as.data.frame(dados) #transformar o objeto de matriz para data.frame
names(dados)
```
## Estatísticas Descritivas dos Itens

Usamos o pacote `psych` para calcular a média, desvio-padrão e outras estatísticas descritivas dos itens:

```{r}
psych::describe(dados)
```
### Interpretando

Responda às seguintes questões:

- Quantas pessoas, em média, responderam a cada item?

- Qual os valores máximo e mínimo observado para as variáveis?

- Qual o item mais difícil de todos? Explique como chegou à sua conclusão.

- Qual tipo de item é o mais fácil, reason, letter, matrix ou rotate? Explique como chegou à sua conclusão. 


## Escore Total ou Observado
O escore total é a soma das respostas dos testandos, que nos itens dicotômicos estão codificadas como `0` e `1`.

```{r}
#criar um objeto com os escores
escores <- dados 

#soma as respostas, removendo as céluas NA
escores$escore_total <- rowSums(dados, na.rm = TRUE)

#histograma para ver a distribuição dos escores totais
hist(escores$escore_total)

#descritiva dos escores totais
psych::describe(escores$escore_total, quant = c(.25, .75))
```
### Interpretando
Descreva a distribuição do escore total.

## Parâmetros da TCT
Para calcular os parâmetros da TCT para os itens, usamos o pacote `CTT`, que é a sigla em inglês para a TCT (Classical Test Theory). Com apenas um comando, conseguimos calcular a dificuldade e a discriminação dos itens, bem como a fidedignidade da escala.

```{r}
library(CTT) #carregar o pacote
tct <- CTT::itemAnalysis(dados) #calcular os parâmetros e criar o objeto tct
names(tct)

```

Criamos um objeto chamado `tct` a partir da função `CTT::itemAnalysis(dados)`, que calculou os parâmetros psicométricos dos itens a partir da TCT e armazenou os resultados nesse objeto. Em seguida, usamos o comando `names(tct)` para listar os nomes dos componentes presentes no objeto `tct`:

- `nItem`: número de itens no teste.

- `nPerson`: número de respondentes (pessoas) no teste.

- `alpha`: valor do alfa de Cronbach, que indica a confiabilidade do teste.

- `scaleMean`: média dos escores totais dos respondentes.

- `scaleSD`: desvio-padrão dos escores totais.

- `itemReport`: um data.frame com estatísticas detalhadas sobre cada item, como dificuldade e discriminação.


Então, criamos um outro objeto chamado `parametros` com os parâmetros da TCT do teste:
```{r}
parametros <- tct$itemReport #pegar os parâmetros dos itens dentro do objeto tct
names(parametros)
```
Extraímos os parâmetros dos itens do objeto `tct` e os armazenamos no objeto `parametros`. Em seguida, ao executar `names(itemReport)`, visualizamos os nomes das colunas do `data.frame` `itemReport`, que representam diferentes estatísticas dos itens:

- `itemName`: Nome ou outro identificador do item.

- `itemMean`: Dificuldade do item, ou seja, a média do item, que indica a proporção de acertos (ou respostas corretas) para cada item.

- `pBis`: Correlação ponto-bisserial, que mede a discriminação de cada item em relação ao escore total.

- `bis`: Correlação bisserial, uma medida alternativa de discriminação do item.

- `alphaIfDeleted`: Valor do alfa de Cronbach se o item fosse removido, indicando o impacto da remoção do item na confiabilidade do teste.

Essas informações são essenciais para avaliar a qualidade psicométrica de cada item no teste.

### Dificuldade (ou Facilidade) dos Itens

Na TCT para itens dicotômicos, a dificuldade de um item é um parâmetro que indica a proporção de respondentes que acertaram o item. Ela é uma medida quantitativa simples que ajuda a avaliar o quão fácil ou difícil um item é para a amostra de testados. Ou seja, a dificuldade é representada pela média das respostas ao item em termos binários (0 para erro e 1 para acerto). Um valor de dificuldade próximo de 1 indica que a maioria dos respondentes acertou o item, ou seja, o item é fácil. Um valor próximo de 0 indica que poucos respondentes acertaram o item, sugerindo que ele é difícil.


`Dificuldade = Soma das respostas corretas / número total de respondentes`


#### Interpretação
- **Itens fáceis**: um índice de dificuldade alto (perto de 1), indicando que muitos participantes acertaram.
- **Itens de dificuldade média**: valores de dificuldade em torno de 0,5, sendo considerados os mais informativos para discriminar entre indivíduos com diferentes níveis do traço medido.
- **Itens difíceis**: um índice de dificuldade baixo (perto de 0), mostrando que poucos participantes acertaram.


Na TCT, o objetivo é ter uma distribuição de dificuldades que permita medir de forma eficaz toda a faixa do traço que se deseja avaliar, garantindo que o teste seja balanceado e discriminativo para diferentes níveis de habilidade.


#### Plotando a Dificuldade dos Itens
```{r}
# Plotar a dificuldade dos itens
plot(parametros$itemMean, #variável a ser plotada
     main = "Dificuldade dos itens", #título do gráfico
     xlab = "Item",#título do eixo x (horizontal)
     ylab = "Dificuldade", #título do eixo y (vertical)
     ylim = c(0:1), #ponto mínimo e máximo do eixo y
     pch = 19, #formato do símbolo no gráfico (círculo sólido)
     col = "darkred", #cor do símbolo
     xaxt = "n", #permitirá configurar os rótulos do eixo x
     yaxt = "n")  #permitirá configurar os rótulos do eixo y

#Configurar os rótulos do eixo x para que fiquem de 1 em 1, entre 1 e 16
axis(1, at = 1:16, labels = 1:16)

#Configurar os rótulos do eixo y para que fiquem de 1 em 1, entre 0 e 1
axis(2, at = seq(0, 1, by = 0.1), labels = seq(0, 1, by = 0.1))


# Adicionar rótulos de dados com os nomes dos itens
text(x = 1:length(parametros$itemMean), #nomear do 1 até o último item em parametros$itemMean
     y = parametros$itemMean, #variável a receber os rótulos
     labels = parametros$itemName,  #variável com os nomes dos itens
     pos = 3, #rótulos acima dos pontos
     srt = 25, #ângulo do texto dos rótulos
     cex = 0.6, #tamanho da fonte dos rótulos
     col = "darkblue") #cor dos rótulos
```


**Curiosidades:**

- Opções para marcadores/símbolos (pch) para usar nos gráficos do R: [https://r-charts.com/base-r/pch-symbols/](https://r-charts.com/base-r/pch-symbols/)

- Opções de cores para usar nos gráficos no R: [https://r-graph-gallery.com/42-colors-names.html](https://r-graph-gallery.com/42-colors-names.html)

#### Interpretando
Descreva a dificuldade dos itens conforme o nível de dificuldade: quais são os itens fáceis (com até 35% de acertos), os de dificuldade média (entre 35% e 65% de acertos) e os difíceis (acima de 65% de acertos). A dificuldade dos itens parece ter relação com o tipo de tarefa a ser executada ao se responder ao item?

### Discriminação dos Itens
A discriminação dos itens refere-se à capacidade de um item de diferenciar entre indivíduos com diferentes níveis do traço medido pelo teste (e.g., habilidade, conhecimento etc.). Itens com boa discriminação são mais eficazes em distinguir entre respondentes de alto e baixo desempenho. Na TCT, a discriminação é medida por meio de correlações, como a correlação **ponto-bisserial (pBis)** e a **correlação bisserial (bis)**. Ambas ajudam a entender como cada item de um teste contribui para a diferenciação entre indivíduos com diferentes níveis do traço medido, mas são calculadas de forma diferente e têm interpretações distintas.

#### Correlação Ponto-Bisserial (pBis)
- **Definição**: A correlação ponto-bisserial é a correlação entre uma variável dicotômica (por exemplo, resposta correta/incorreta a um item de teste) e uma variável contínua (geralmente o escore total no teste).

- **Aplicação**: É usada para avaliar a discriminação de itens em um teste, ou seja, a capacidade de um item de distinguir entre respondentes com alto e baixo desempenho no teste.

- **Interpretação**: Valores mais altos (positivos) indicam que o item é bom em discriminar entre indivíduos com diferentes níveis de habilidade; valores próximos de zero indicam que o item não discrimina bem.

#### Correlação Bisserial (bis)
- **Definição**: A correlação bisserial é uma estimativa da correlação entre uma variável dicotômica e uma variável contínua subjacente que se assume ser normalmente distribuída. A variável dicotômica é considerada uma transformação de uma variável contínua subjacente.

- **Aplicação**: É usada para avaliar a discriminação de itens, mas assume que a variável contínua subjacente está normalmente distribuída e que a dicotomização resulta de um corte em uma distribuição contínua.

- **Interpretação**: Assim como a pBis, valores altos indicam boa discriminação. No entanto, a bis pode fornecer um valor mais próximo da correlação verdadeira subjacente entre a variável contínua e a variável dicotômica.

#### Diferenças Principais
- **Assunções**: A pBis não assume uma distribuição normal da variável contínua subjacente, enquanto a bis assume que a variável contínua subjacente é normalmente distribuída.

- **Cálculo**: A pBis é mais simples de calcular e usar em situações em que a normalidade não é garantida, enquanto a bis é mais complexa e baseada na ideia de que a variável dicotômica é uma transformação de uma variável contínua subjacente.

- **Interpretação**: Em muitos casos, os valores da bis são maiores do que os da pBis, pois a bis ajusta para a perda de informação que ocorre ao transformar uma variável contínua em dicotômica.

Ambas as correlações são úteis em contextos diferentes, e a escolha entre pBis e bis depende das características dos dados e dos objetivos da análise.

#### Plotando a Discriminação dos Itens
```{r}

# Plotar a pBis
plot(parametros$pBis, # variável a ser plotada
     main = "Discriminação dos itens: pBis e bis", # título do gráfico
     xlab = "Item", # título do eixo x (horizontal)
     ylab = "Correlação", # título do eixo y (vertical)
     ylim = c(0, 1), # ponto mínimo e máximo do eixo y
     pch = 19, # tipo de gráfico (linhas verticais)
     col = "darkred", # cor das linhas de pBis
     xaxt = "n", # remover temporariamente os rótulos do eixo x
     yaxt = "n")  # remover temporariamente os rótulos do eixo y

# Configurar os rótulos do eixo x de 1 em 1
axis(1, at = 1:16, labels = 1:16)

# Configurar os rótulos do eixo y de 0.1 em 0.1
axis(2, at = seq(0, 1, by = 0.1), labels = seq(0, 1, by = 0.1))

# Adicionar a bis ao gráfico
points(parametros$bis, pch = 17, col = "darkblue", lwd = 2) # Adiciona pontos com valores de bis

# Adicionar rótulos de dados com os nomes dos itens (bis)
text(x = 1:length(parametros$bis),
     y = parametros$bis,
     labels = parametros$itemName,
     pos = 3, srt = 0, cex = 0.6, col = "black")

#Adicionar legenda no canto direito inferior
legend("bottomright",
       legend = c("pBis", "bis"), 
       col = c("darkred", "darkblue"), 
       pch = c(19, 17), 
       bty = "n") # bty = "n" remove a caixa ao redor da legenda

```
#### Interpretando

A interpretação conjunta da correlação ponto-bisserial (pBis) e da correlação bisserial (bis) pode fornecer uma visão mais completa sobre a discriminação dos itens em um teste psicométrico. Ambas as correlações medem a associação entre a resposta a um item e o escore total, mas de maneiras ligeiramente diferentes. Aqui estão diretrizes para interpretar essas correlações de forma integrada:


- **pBis e bis ambos altos (ex.: ≥ 0.30)**: Indica que o item possui uma excelente discriminação e contribui positivamente para a qualidade do teste. Esses itens são eficazes em distinguir respondentes com diferentes níveis do traço medido e devem ser mantidos. Isso sugere que a variável contínua subjacente (assumida pela bis) e a associação direta com o escore total (medida pela pBis) estão alinhadas, reforçando a validade do item.


- **pBis alta (ex.: ≥ 0.30) e bis baixa (ex.: < 0.20):** Pode ocorrer em casos em que a suposição de normalidade da variável subjacente (assumida pela bis) não é atendida. Isso pode sugerir que a pBis é mais confiável nesse caso específico. Nesses casos, a discriminação avaliada pela pBis é válida, mas a interpretação da bis deve ser feita com cautela, questionando a suposição de uma distribuição subjacente.


- **pBis e bis ambas baixas (ex.: < 0.20):** Sinal de que o item tem baixa discriminação. Esses itens não contribuem significativamente para a precisão do teste e podem precisar de revisão ou remoção.
Itens com baixa pBis e bis podem ser ineficazes e devem ser analisados em termos de conteúdo e clareza para melhorar sua discriminação.


- **pBis e/ou bis negativas (< 0.00):** Indica que o item está correlacionado de forma inversa com o escore total, o que é problemático. Pode significar que o item é mal formulado ou contém ambiguidades que confundem respondentes de alta habilidade, levando-os a errar mais frequentemente. Itens com correlações negativas devem ser revisados ou removidos, pois podem estar afetando a consistência e validade do teste.


Interprete o parâmetro de discriminação dos itens do teste `ability`.


### Confiablidade

O **alfa de Cronbach** é uma medida de confiabilidade ou consistência interna de um teste ou instrumento de medição psicométrico. Ele indica o quão bem os itens de um teste estão relacionados entre si e, portanto, a extensão em que eles medem o mesmo construto subjacente. O valor do alfa varia de 0 a 1, e quanto mais próximo de 1, maior é a consistência interna do teste. O alfa de Cronbach é amplamente utilizado em pesquisas nas áreas de psicologia, educação e outras ciências sociais para verificar a confiabilidade de questionários, escalas de avaliação e testes. É uma ferramenta importante para garantir que os itens de um instrumento são consistentes e contribuem para a medição precisa do construto desejado.

#### Interpretação
- **Alfa ≥ 0.9**: Excelente (alta confiabilidade)
- **0.8 ≤ Alfa < 0.9**: Bom (boa confiabilidade)
- **0.7 ≤ Alfa < 0.8**: Aceitável (confiabilidade adequada)
- **0.6 ≤ Alfa < 0.7**: Questionável (confiabilidade marginal)
- **0.5 ≤ Alfa < 0.6**: Fraco (confiabilidade baixa)
- **Alfa < 0.5**: Inaceitável (confiabilidade muito baixa)

#### Limitações
- **Unidimensionalidade**: O alfa de Cronbach assume que todos os itens do teste medem o mesmo construto unidimensional. Se o teste medir mais de um fator ou dimensão, o alfa pode não ser a melhor medida de consistência interna.
- **Número de itens**: Um teste com muitos itens tende a ter um alfa mais alto, mesmo que os itens não estejam fortemente relacionados. Portanto, o alfa de Cronbach não é uma medida definitiva de qualidade dos itens.

#### Aplicando
Avalie a confiabilidade do teste `ability`.
```{r}
tct
```
Algum item está prejudicando a consistência interna do teste `ability` e poderia ser retirado no cálculo do escore total dos testandos?
```{r}
parametros

```


# 17 de outubro

Na aula de hoje, fizemos uma revisão do que estudamos até o momento por meio da análise de um banco de dados com respostas ao instrumento [Ten-Item Personality Inventory (TIPI)](https://www.frontiersin.org/journals/psychology/articles/10.3389/fpsyg.2023.1202953/full). Esse banco contém respostas de estudantes de diferentes turmas do professor.

## Atividade

1.  Abra o banco de dados `Ten-Item Personality Inventory-(TIPI) (respostas).xlsx` no seu projeto no R. O banco está disponível em <https://docs.google.com/spreadsheets/d/1PI1oWW-PUHb9hRSlv9rAMyAsEmyqNRrL/edit?usp=sharing&ouid=118205451649792182527&rtpof=true&sd=true>

2.  Qual a estrutura do objeto criado com o banco de dados? Garanta que ele esteja no formato de `data frame`.

3.  Quais os nomes das variáveis no banco?

4.  Para cada fator do Big Five, quais são os pares de itens?

5.  Qual a média, a mediana e o desvio-padrão de cada variável?

6.  Qual o total e o percentual de dados faltosos para cada variável?

7.  Elabore um histograma para cada variável.

8.  Há presença de outliers? Faça uma inspeção visual criando um boxplot para cada variável.

9.  Quais as correlações entre todo os pares possíveis de variáveis (com exceção de `Carimbo de data/hora`)? Apresente a matriz de correlações, o mapa de calor e os paineis de pares de variáveis.

10. Considerando a teoria do Big Five, avalie a qualidade do instrumento `Ten-Item Personality Inventory-(TIPI)`. Ele parece ser bom para avaliar os cinco fatores? As correlações entre as variáveis se comportaram conforme esperado teoricamente?

11. Suas respostas devem ser em formato de texto corrido e mais detalhadas o possível. Lembre que o objetivo é que o portfólio sirva de guia para você no futuro. Não deixe nenhuma atividade para trás, nenhuma análise sem explicação e nenhum código sem comentários.

------------------------------------------------------------------------

# 03 de outubro

Nessa aula estudamos correlações, usando o banco de dados `bfi` disponível no pacote **`psych`**.

## Carregando o psych

O pacote psych já foi instalado em [26 de setembro].

```{r}
library(psych)
```

## Abrindo o banco `bfi` do pacote `psych`

```{r}
data(bfi)
head(bfi)
```

## Correlações

### Correlação entre duas variáveis

```{r}

cor(x = bfi$age, #variável 1: idade
    y = bfi$education, #variável 2: escolaridade
    use = "complete.obs", #usar apenas observações sem dados faltosos
    method = "pearson") #calcular correlações de Pearson

```

## Coeficiente de Determinação (*R^2^*)

O **coeficiente de determinação**, representado como *R^2^*, é uma medida estatística que indica a proporção da variação total de uma variável dependente que é explicada pelo modelo de regressão. Em termos simples, o *R^2^* mostra o quão bem os valores previstos pelo modelo se ajustam aos dados reais. Ele varia de 0 a 1, onde:

-   *R^2^*=0 significa que o modelo não explica nenhuma variação nos dados.

-   *R^2^*=1 indica que o modelo explica toda a variação dos dados.

Por exemplo, um *R*2 = 0,80 indica que 80% da variação da variável dependente é explicada pelo modelo, enquanto os 20% restantes são explicados por outros fatores não incluídos no modelo.

Vale ressaltar que um *R^2^* mais alto nem sempre significa que o modelo é melhor, pois modelos muito complexos podem ajustar-se aos dados de forma excessiva (*overfitting*).

```{r}

# R2 é igual ao coeficiente de correlação ao quadrado
0.24 * 0.24 

# Outra forma de se elevar ao quadrado
.24^2 

# Para interpretar o R2 em termos percentuais, basta multiplicar o quadrado do coeficiente de correlação por 100
(.24^2)*100 
```

### Itens de Abertura (O)

Para calcular as correlações dos itens de abertura do banco `bfi` podemos seguir os passos abaixo:

```{r}

names(bfi) #ver quais são as variáveis de abertura (O)

abertura <- bfi[,21:25] #selecionamos somente as variáveis de abertura
names(abertura) #verificando se o objeto "abertura" criado está apenas com variáveis de abertura

options(scipen = 9999) #desligar a notação científica

#calcular as correlações de Pearson, com intervalo de confiança
ab.correl <- corr.test(abertura, #banco de dados
                       use = "pairwise", #tratamento de missing
                       method = "pearson") #método de correlação

ab.r <- ab.correl$r #matriz de correlações calculada

ab.n <- ab.correl$n #observações por pares de itens utilizadas para calcular as correlações

ab.ci <- round(ab.correl$ci,3) #intervalo de confiança com arrendondamento para 3 decimais


```

#### Correlogramas

Na última aula vimos um tipo de correlograma chamado mapa de calor. Abaixo, além de um mapa de calor, também podemos gerar um painel com informações sobre as correlações entre os pares de variáveis. Na prática, é uma forma alternativa de representar a matriz de correlações.

##### Mapa de Calor

```{r}
cor.plot(abertura, digits = 2, cex = 1) #correlograma de mapa de calor
```

##### Painéis de Pares de Variáveis

```{r}
pairs.panels(x = abertura, method = "pearson") #correlograma
```

### Demais fatores do banco `bfi`

Usando a mesma estratégia adotada para analisar as correlações dos itens de Abertura, estime as correlações de Pearson dos itens dos demais fatores:

-   Itens de Conscienciosidade (itens C)

-   Itens de Extroversão (itens E)

-   Itens de Amabilidade (itens A)

-   Itens de Neuroticismo (itens N)

------------------------------------------------------------------------

# 26 de setembro

Nessa aula, aprendemos algumas técnicas para explorar os dados. Vamos usar o pacote **`psych`** (<https://cran.r-project.org/web/packages/psych/index.html>) para isso.

## Instalando e carregando o psych

```{r}

#instalar o pacote psych
#install.packages("psych")

#carregar o pacote psych
library(psych)
```

## Abrir o banco de dados `bfi`

O pacote psych vem com alguns bancos de dados que podem ser usados para treinarmos algumas habilidades de análise. Vamos usar o banco de dados **`bfi`** (Big Five Inventory).

```{r}

#abrir o banco
data(bfi)

#visualizar o cabeçalho do data frame
head(bfi)
```

## Estrutura do banco de dados

```{r}
#visualizar a estrutura do data frame
str(bfi)
```

```{r}
#nomes das colunas
names(bfi)
```

## Estatísticas Descritivas

```{r}
summary(object = bfi)
```

```{r}

psych::describe(x = bfi)
```

```{r}
psych::describe(x = bfi, quant = c(.1, .2, .3, .4, .5, .6, .7, .8, .9))
```

```{r}
psych::describeBy(x = bfi, group = "gender", digits = 2)
```

```{r}

table(bfi$gender)
```

## Selecionando apenas os itens de personalidade no banco `bfi`

```{# selecionar variáveis}
# selecionando colunas 1 a 25 e todas as linhas
# as linhas vêm antes da "," e as colunas depois da ","
bfi[,1:25]

# selecionar linhas
# selecionando as linhas 1 a 10 e as colunas 1 a 5
bfi[1:10, 1:5]
```

```{r}

#selecionando somente os itens de personalidade, que são os 25 primeiros do banco bfi

dados <- bfi[,1:25]
```

## Histogramas

A função a seguir do pacote `psych` permite gerar em um mesmo gráfico histogramas para todas as variáveis do banco.

```{r}

psych::multi.hist(x = dados,
                  ncol = 5, nrow = 5,
                  density = TRUE,
                  bcol = "darkblue", dcol = "red",
                  global = TRUE)

```

## Boxplots

Também é possível gerar histogramas para todas as variáveis de uma vez. A função a seguir faz parte do pacote `graphics`, que já vem instalado junto com o `R`, ou seja, não é necessário instalá-lo ou carregá-lo para utilizá-lo.

```{r}
boxplot(dados, border = "darkred")
```

## Correlograma

Um correlograma é uma representação gráfica utilizada para mostrar as correlações entre observações em uma série temporal ou entre variáveis em um conjunto de dados. O pacote `psych` possui algumas opções de correlogramas, como o mapa de calor e os painéis de pares de variáveis. Há outras opções visualmente mais atraentes no R, mas podemos deixar para ver isso em outra ocasião. Se estiver curioso, esse site apresenta uma galeria de opções de gráficos que podemos fazer no R usando diversos pacotes: <https://r-graph-gallery.com/>.

```{r}

psych::cor.plot(dados)

```

------------------------------------------------------------------------

# 12 de setembro

Nessa aula, exploramos o conceito de objetos e tipos de dados no `R`, que são fundamentais para trabalhar com esta linguagem. No `R`, tudo é um objeto, desde números simples até estruturas complexas como data frames. Buscamos entender como criar e manipular esses objetos, e também discutimos os principais tipos de dados, como numéricos, caracteres, lógicos e fatores. Compreender esses conceitos permitirá que você armazene e manipule dados em seus projetos de pesquisa.

## Objetos

No R, um objeto é qualquer entidade que pode armazenar dados. Todos os dados em R são armazenados em objetos, que podem variar de tipos simples, como números (numéricos), texto (caracteres) e valores lógicos (por exemplo, TRUE ou FALSE), até estruturas mais complexas, como vetores, listas, matrizes, data frames e funções. Objetos podem ser criados atribuindo valores a eles com o operador `<-`, e uma vez criados, podem ser manipulados ou chamados para as análises de dados.

### Nomeando objetos

Ao nomear um objeto no R, existem algumas regras básicas:

1.  **Iniciar com letra ou ponto**: O nome deve começar com uma letra (maiúscula ou minúscula) ou um ponto, mas não com um número.

2.  **Não usar palavras reservadas**: Certas palavras, como `if`, `else`, `TRUE`, e `FALSE`, são reservadas e não podem ser usadas como nomes de objetos.

3.  **Sensível a maiúsculas/minúsculas**: `nome` e `Nome` são considerados objetos diferentes.

4.  **Evitar espaços**: Use underscores (`_`) ou pontos (`.`) para separar palavras.

Exemplo: `minha_variavel`, `meu.objeto` são válidos.

```{r}
# como nomear objetos:
exemplo.de.nome <- "exemplo"
exemplo_de_nome <- "exemplo"
exemploNome <- "exemplo"
nomeExemplo <- "exemplo"
nome999 <- "Exemplo"
```

```{r eval=FALSE}
# como NÃO nomear objetos:
# 99nome <- "valor"
# TRUE <- "valor"
# if <- "valor"
```

Aqui estão algumas dicas para nomear objetos no R de forma eficiente e clara:

1.  **Seja descritivo, mas conciso**: use nomes que indiquem a função ou conteúdo do objeto, como `dados_analise` ou `media_vendas`.

2.  **Use underscores ou camelCase**: Separe palavras com underscores (`dados_vendas`) ou use camelCase (`dadosVendas`), facilitando a leitura.

3.  **Evite nomes muito longos**: Prefira `media_grupo` em vez de `media_grupo_ano_mes_analise`.

4.  **Use siglas ou abreviações comuns**: Se for algo repetido, como "dados", pode usar `df` para data frame, por exemplo, `df_vendas`.

### Objetos e tipos de dados

#### Numéricos

Armazena números, podendo ser inteiros ou decimais. No caso de decimais, o R usa como separador o `"."`, não a `","`.

```{r}

# Criando um objeto numérico:
numero.um <- 1
numero.dois <- 2
numero_inteiro <- 543
decimais <- 0.5

# Verificando o quê tem dentro do objeto:
numero.um
numero.dois
numero_inteiro
decimais

# Verificando o tipo (classe) de dados de um objeto:
class(numero.um)
class(numero.dois)
class(numero_inteiro)
class(decimais)

```

#### Caracteres

Sequências de texto (*strings*).

```{r}

# Criando um objeto string (caractere):
meu.texto <- "texto vem aqui entre aspas"
meuNome <- "alexandre"
outro_texto <- "outro texto"
titulo <- "texto"


# Verificando o quê tem dentro do objeto:
meu.texto
meuNome
outro_texto
titulo

# Verificando o tipo de dado de um objeto:
class(meu.texto)
class(meuNome)
class(outro_texto)
class(titulo)
```

#### Lógicos

Valores booleanos em R, também conhecidos como **valores lógicos**, representam uma condição de verdadeiro ou falso. Existem dois valores booleanos em R:

-   **TRUE**: Verdadeiro.

-   **FALSE**: Falso.

```{r}

x <- 5
y <- 10

# Comparação que retorna um valor booleano
x == y  #FALSE
x < y #TRUE
y > x #TRUE
y != x #TRUE
```

#### Fator

Representa variáveis categóricas com níveis. Exemplo: `sexo` com categorias `"masculino"` e `"feminino"`.

```{r}
# Criando um vetor com categorias
sexo <- c("masculino", "feminino", "feminino", "masculino")

# Convertendo para fator
fator_sexo <- factor(sexo)

# Verificando os níveis
levels(fator_sexo)

```

#### Vetor

Vetores são sequências de elementos do mesmo tipo. Eles podem conter números, caracteres, ou valores lógicos.

```{r}

# Criando vetores numéricos, de caracteres e lógicos
vetor_numerico <- c(1, 2, 3, 4, 5)
vetor_caractere <- c("a", "b", "c")
vetor_logico <- c(TRUE, FALSE, TRUE)

# Exibindo os vetores
vetor_numerico
vetor_caractere
vetor_logico

# Verificando o tipo de cada vetor
class(vetor_numerico)
class(vetor_caractere)
class(vetor_logico)

```

#### Matriz

Matrizes são tabelas de duas dimensões com elementos do mesmo tipo.

```{r}
# Criando uma matriz
matriz_exemplo <- matrix(1:9, nrow = 3, ncol = 3)

# Exibindo a matriz
matriz_exemplo

# Verificando a classe
class(matriz_exemplo)

```

#### Data Frame

Os data frames são tabelas com diferentes tipos de dados (numéricos, caracteres, etc.) organizados em colunas. Cada coluna pode ter um tipo de dado diferente.

Criando um data frame:

```{r}

df <-
  data.frame(
  nome = c("Alice", "Bob", "Carol"),
  idade = c(25, 30, 22),
  sexo = factor(c("feminino", "masculino", "feminino"))
  )

```

Exibindo o data frame:

```{r}

df
```

Verificando a estrutura do data frame:

```{r}
str(df)
```

Inspecionando apenas as primeiras linhas do data frame:

```{r}
head(df)
```

Verificando os nomes das colunas do data frame:

```{r}
names(df)
```

#### Listas

As listas podem armazenar diferentes tipos de dados, como vetores, data frames, e até outras listas.

Criando uma lista:

```{r}
minha_lista <- list(nome = "Alexandre",
                    numeros = c(1, 2, 3),
                    matriz = matriz_exemplo)
```

Exibindo a minha lista:

```{r}
minha_lista
```

Acessando elementos da minha lista, usando o `$`:

```{r}
# Acessando elementos da lista
minha_lista$nome
minha_lista$numeros
minha_lista$matriz
```

#### Faça você mesmo: explorando data frames

O objetivo é coletar dados diretamente de seus colegas de classe para criar e manipular um **data frame** no R. Passos:

1.  **Coleta de Dados**:

    -   Entreviste 5 colegas, coletando informações básicas:

        -   Nome

        -   Idade

        -   Gênero (masculino/feminino/outros)

        -   Nível de amor pelo R (escala de 0 a 5)

        -   Expectativas em relação a se tornar um especialista em psicometria (escala de 0 a 5)

2.  Crie um vetor para cada variável

```{r}
# exemplo
nomes <- c("Spearman", "Revelle",
           "Pasquali", "Pearson",
           "Cattell")
idades <- c(24, 50, 34, 78, 50)
anos_de_estudo <- c(18, 45, 30, 72, 45)

#continue para gênero, nível de amor e expectativas...
```

```{r}

nomes <- c("Victória F.", "Fernanda",
           "Rebeca", "Victória A.",
           "Ana Carolina", "Antônio",
           "Luciana D.", "Janete")

idades <- c(23, 27,
            25, 19,
            54, 54,
            30, 54)

sexo <- c("F", "F",
          "F", "F",
          "F", "M",
          "F", "F")

amoR <- c(1, 2,
          4, 4,
          3, 5,
          1, 2)

expectativa <- c(3, 5,
                 5, 4,
                 5, 4,
                 5, 5)
```

3.  Crie um data frame juntando as diferentes colunas

```{r}

#exemplo
df <- data.frame(nomes, idades) #continue com as demais variáveis

#você pode elaborar o df diretamente, sem fazer os vetores antes:
df <- data.frame(
  nomes = c("Spearman", "Revelle", "Pasquali", "Pearson", "Cattell"),
  idades = c(24, 50, 34, 78, 50),
  anos_de_estudo = c(18, 45, 30, 72, 45)) #continue com as demais variáveis

print(df)

```

```{r}

df <- data.frame(nomes, idades,
                 sexo, amoR,
                 expectativa)

head(df)
```

4.  Calcule as médias de idade, nível de amor e expectativas usando a função `mean()`

```{r}
#exemplo
media_idade <- mean(df$idades)
print(media_idade)

media_amoR <- mean(df$amoR)
media_amoR

media_expectativa <- mean(df$expectativa)
media_expectativa
```

5.  Conte a frequência de cada valor de nível de amor e de expectativa

```{r}
#exemplo
tabela_idade <- table(df$idades)
tabela_idade
```

5.  Faça um gráfico de barras azuis para nível de amor e outro para expectativa

```{r}

#exemplo
barplot(height = tabela_idade, #table() conta a frequência de um valor
        main = "Gráfico de barras das idades do grupo", #título do gráfico
        col = "pink", #cor das barras
        xlab = "Idades em anos", #título do eixo x
        ylab = "Alunos (n)", #título do eixo y
        ) 


barplot(height = table(df$sexo), #table() conta a frequência de um valor
        main = "Gráfico de barras dos anos de estudo do grupo", #título do gráfico
        col = "green", #cor das barras
        xlab = "Sexo", #título do eixo x
        ylab = "Alunos (n)", #título do eixo y
        ) 

```

6.  Faça um diagrama de dispersão entre nível de amor e expectativa

```{r}
#exemplo
plot(x = df$amoR, #variável 1
     y = df$expectativa, #variável 2
     xlab = "AmoR pelo R", #título do eixo x
     ylab = "Expectativa de ser uma psicometrista", #título do eixo y
     col="red",#cor dos símbolos
     pch = 20, #formato dos símbolos 
     cex = 3) #tamanho dos símbolos
```

7.  Interprete a relação entre nível de amor pelo R e o nível de expectativa por ser um especialista em psicometria.

# 29 de agosto

O R possui diversos pacotes. Cada pacote permite realizar um tipo de análise de dados. Por exemplo, vamos abrir um arquivo do Excel. Vamos ver como fazer a seguir.

Na pasta `dados` eu criei um Excel chamado `exemplo.xlsx`. Para abrir um arquivo Excel no R usamos um pacote chamado `readxl.`

## Instalando um pacote

Para instalar um pacote do R, usamos um código como a seguir:

```{r eval=FALSE}
install.packages("readxl")
```

Eu não preciso instalar um pacote todas as vezes que eu for usar o R. Eu só preciso instalar um pacote nas seguintes situações:

-   quando eu instalar ou reinstalar o R ou

-   quando eu quiser atualizar um pacote.

## Carregando um pacote

Sempre que eu abrir o R, eu preciso carregar os pacotes que eu for usar nas análises. Para carregar um pacote, uso devo usar um código como a seguir:

```{r warning=FALSE}
library(readxl)
```

## Abrindo um banco de dados

Para abrir um banco de dados, eu posso usar o botão `Import Dataset` no RStudio. Mas, é mais estratégico escrever um código para fazer isso.

```{r}

# carregar o pacote:
library(readxl)

# abrir o banco de dados:
## exemplo é o nome do objeto que será criado no R
## read_excel() é a função do pacote readxl
## path é o caminho do meu arquivo no meu computador
exemplo <- read_excel(path = "dados/exemplo.xlsx")

```

Uma forma alternativa para carregar os pacotes é a seguinte:

```{r}
exemplo <- readxl::read_excel(path = "dados/exemplo.xlsx")
exemplo
```

------------------------------------------------------------------------

# 22 de agosto

## Organizando meus arquivos

Na aula de hoje, criamos uma pasta no meu computador chamada `Estudos e Aprofundamentos II` (confira o nome da pasta no seu computador). Dentro dessa pasta, organizei uma subpasta chamada `dados` (confira o nome da pasta no seu computador), onde salvarei todos os bancos de dados que utilizaremos ao longo das aulas.

## Instalando o R e o Rstudio

Na sequência, fiz o *download* e instalei os seguintes *softwares*:

-   ![](images/clipboard-2522369385.png){width="50"}: <https://cran.r-project.org/>

-   ![](images/clipboard-1101431117.png){width="111"}: <https://posit.co/download/rstudio-desktop/>

O R é uma linguagem de programação voltada à análise de dados. O RStudio é uma interface um pouco mais amigável para usar o R. No R, nós precisamos usar códigos para poder realizar uma tarefa. Ou seja, no R não usamos o mouse para realizar as tarefas.

Após instalar o R e o RStudio, eu configurei a aparência do meu RStudio para deixar mais com a minha cara. Para fazer isso, fui no menu superior, escolhi a opção `Tools`, depois a opção `Global Options` e então explorei a seção `Appearance`.

![](images/clipboard-2176492194.png)

## Criando um projeto

Além disso, criei um projeto no `R,` chamado `Estudos e Aprofundamentos II.Rproj`, dentro dessa mesma pasta. Também iniciei meu portfólio em um arquivo no formato `*.qmd`, que nomeei como `index.qmd`.

Durante todo o semestre, o arquivo `index.qmd` será editado e atualizado conforme avançamos nas aulas. Esta é a principal atividade avaliativa da disciplina.

## Gerando um HTML

Ao final de cada aula, posso gerar uma página `HTML` do meu portfólio clicando no botão `Render` no RStudio.

![](images/clipboard-671439482.png)

## Tutoriais em vídeo

-   Psicometria Online: [Como Instalar o R e o RStudio](https://www.youtube.com/watch?v=a4_0pKVY6RE)

-   Epidemio Fora da Curva: [Como criar um projeto no RStudio](https://youtu.be/ts4jLbY6zUc)

-   Curso-R: [Aprendendo a usar o quarto](https://www.youtube.com/watch?v=cpbmQRsIutc)

------------------------------------------------------------------------

# Alexandre Peres

**Alexandre Peres** é professor da Universidade Federal de Mato Grosso do Sul (UFMS), no Programa de Pós-Graduação em Psicologia na Faculdade de Ciências Humanas (FACH), em Campo Grande, desde 2018. Coordena o Laboratório de Psicometria, Avaliação Psicológica e Educacional (LabPAPE). É psicólogo graduado pela Universidade Federal de Uberlândia (UFU) e possui mestrado e doutorado em Psicologia Social, do Trabalho e das Organizações pela Universidade de Brasília (UnB). Foi pesquisador do Instituto Nacional de Estudos e Pesquisas Educacionais Anísio Teixeira (INEP) entre 2008 e 2018, e psicólogo do Ministério do Desenvolvimento Social entre 2006 e 2008. Seus interesses de pesquisa em psicologia estão relacionados especialmente à psicologia da personalidade e à psicometria. Interessa-se também por testagem educacional em larga-escala e por avaliação de programas e políticas educacionais.

**alexandre.peres\@ufms.br**

![](images/clipboard-3666764004.png){fig-align="center" width="262"}

![](images/clipboard-316312062.png){fig-align="center"}

![](images/ufms_logo_negativo_assinatura_vertical_pb_rgb-01.png){fig-align="center" width="533"}
